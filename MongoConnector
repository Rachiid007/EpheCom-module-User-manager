from pymongo import MongoClient

class MongoConnector:
    """
        Cette classe permet de créer une connexion vers la base de données.
        Veuillez modifier la variable 'certificat_path' avec le chemin vers l'endroit ou se trouve votre certificat.
        Exemple d'utilisation dans votre code :
        try:
            with MongoConnector() as connector:
                collection = connector.db["users"]
                res = collection.find_one()
                print(res)
        except Exception as e:
            print(e)
    """

    def __init__(self):
        uri = "mongodb+srv://cluster0.5i6qo.gcp.mongodb.net/ephecom?authSource=%24external&authMechanism=MONGODB-X509&retryWrites=true&w=majority"
        client = MongoClient(uri,
                             tls=True,
                             tlsCertificateKeyFile="2TM1-G2.pem")
        self.db = client['ephecom']
        print(self.db.list_collection_names())

    def __enter__(self):
        return self

    def __exit__(self):
        self.db.close()
  1  Role.py 
@@ -221,6 +221,7 @@ def isrole_exist_indb(self, role):
        rolemgt.update_role_indb(role1)
        print(role1)
        print(rolemgt.get_all_roles_fromdb())

    except Exception as e:
        print(e)
